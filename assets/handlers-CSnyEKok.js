import{a as f,i as y}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();async function F(){try{return(await f("https://dummyjson.com/products/category-list")).data}catch(t){throw console.log(t.message),new Error("Something went wrong!")}}async function L(t=1){try{return(await f.get(`https://dummyjson.com/products?limit=12&skip=${(t-1)*12}`)).data}catch(e){throw console.log(e.message),new Error("Something went wrong!")}}async function M(t,e=1){try{return(await f.get(`https://dummyjson.com/products/category/${t}?limit=12&skip=${(e-1)*12}`)).data}catch(r){throw console.log(r.message),new Error("Something went wrong!")}}async function w(t){try{return(await f.get(`https://dummyjson.com/products/${t}`)).data}catch(e){throw console.log(e.message),new Error("Something went wrong!")}}async function J(t,e=1){try{return(await f.get(`https://dummyjson.com/products/search?q=${t}&limit=12&skip=${(e-1)*12}`)).data}catch(r){throw console.log(r.message),new Error("Something went wrong!")}}const o={categotiesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),divNotFound:document.querySelector(".not-found"),divModal:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),addCartBtn:document.querySelector(".modal-product__btn--cart"),cartCount:document.querySelector("[data-cart-count]"),addWishListBtn:document.querySelector(".modal-product__btn--wishlist"),wishListCount:document.querySelector("[data-wishlist-count]"),dataCount:document.querySelector("[data-count]"),dataPrice:document.querySelector("[data-price]"),buyProductBtn:document.querySelector(".cart-summary__btn"),changeThemeBtn:document.querySelector(".theme-toggle-btn"),body:document.querySelector("body"),loaderBox:document.querySelector(".loader-box"),btnLoadMore:document.querySelector(".load-more-btn")},h="cart";function i(){return JSON.parse(localStorage.getItem(h))}function H(){const t=i()??[];localStorage.setItem(h,JSON.stringify(t))}function K(t){const e=i();e.push(t),localStorage.setItem(h,JSON.stringify(e))}function D(t){const r=i().filter(n=>n!==t);localStorage.setItem(h,JSON.stringify(r))}function R(){const t=[];localStorage.setItem(h,JSON.stringify(t))}const S="wishlist";function m(){return JSON.parse(localStorage.getItem(S))}function z(){const t=m()??[];localStorage.setItem(S,JSON.stringify(t))}function V(t){const e=m();e.push(t),localStorage.setItem(S,JSON.stringify(e))}function G(t){const r=m().filter(n=>n!==t);localStorage.setItem(S,JSON.stringify(r))}const C="theme";function T(){return JSON.parse(localStorage.getItem(C))}function Q(){const t=T()??"";localStorage.setItem(C,JSON.stringify(t))}function $(t){localStorage.setItem(C,JSON.stringify(t))}function U(t){const e=["All",...t].map(r=>`
    <li class="categories__item">
        <button class="categories__btn" type="button">${r}</button>
    </li>
 `).join("");o.categotiesList.insertAdjacentHTML("beforeend",e)}function l(t){const e=t.map(({id:r,title:n,thumbnail:s,brand:a,category:u,price:_})=>`
    <li class="products__item" data-id="${r}">
    <img class="products__image" src="${s}" alt="${n}"/>
    <p class="products__title">${n}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${a}</span></p>
    <p class="products__category">Category:${u}</p>
    <p class="products__price">Price:${_}$</p>
 </li>
    `).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function q(){o.divNotFound.classList.remove("not-found--visible"),o.productsList.innerHTML=""}function X({title:t,thumbnail:e,shippingInformation:r,category:n,price:s,description:a,returnPolicy:u}){const _=`
    <img class="modal-product__img" src="${e}" alt="${t}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${n}</ul>
        <p class="modal-product__description">${a}</p>
        <p class="modal-product__shipping-information">Shipping:${r}</p>
        <p class="modal-product__return-policy">Return Policy:${u}</p>
        <p class="modal-product__price">Price:${s} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;o.divModal.insertAdjacentHTML("beforeend",_)}function Y(){o.modal.classList.remove("modal--is-open"),o.divModal.innerHTML=""}function P(){o.productsList.innerHTML=""}async function N(){const e=i().map(s=>w(s)),r=await Promise.all(e);l(r);const n=r.reduce((s,a)=>s+a.price,0);o.dataPrice.textContent=`$ ${n.toFixed(2)}`}async function Z(){const e=m().map(n=>w(n)),r=await Promise.all(e);l(r)}function O(t){let e=i();!e.includes(t)||e.length===0?o.addCartBtn.textContent="Add to cart":o.addCartBtn.textContent="Remove from cart"}function W(t){let e=m();!e.includes(t)||e.length===0?o.addWishListBtn.textContent="Add to Wishlist":o.addWishListBtn.textContent="Remove from Wishlist"}function v(){let t=i();o.cartCount.textContent=t.length}function x(){let t=m();o.wishListCount.textContent=t.length}function E(){let t=i();o.dataCount.textContent=t.length}function tt(){const t=T();t!==""&&o.body.setAttribute("data-theme",t)}function B(){o.loaderBox.classList.remove("is-hidden")}function A(){o.loaderBox.classList.add("is-hidden")}function I(){o.btnLoadMore.classList.remove("is-hidden")}function b(){o.btnLoadMore.classList.add("is-hidden")}Q();tt();H();z();v();x();let d={totalPages:0,perPage:12};async function et(){U(await F());const t=await L();l(t.products),d.totalPages=Math.ceil(t.total/d.perPage),d.totalPages>1&&I()}et();o.categotiesList.addEventListener("click",ot);o.productsList.addEventListener("click",rt);o.modalCloseBtn.addEventListener("click",st);o.searchForm.addEventListener("submit",nt);o.formBtnClear.addEventListener("click",at);o.addCartBtn.addEventListener("click",k);o.addWishListBtn.addEventListener("click",j);o.changeThemeBtn.addEventListener("click",ct);o.btnLoadMore.addEventListener("click",it);let g=1,p="";async function ot(t){if(b(),t.target.classList.contains("categories__btn")){B(),q();const e=t.target;o.categotiesList.querySelectorAll(".categories__btn").forEach(a=>{a.classList.remove("categories__btn--active")}),e.classList.add("categories__btn--active");const n=e.textContent,s=n==="All"?await L():await M(n);A(),d.totalPages=Math.ceil(s.total/d.perPage),console.log(d.totalPages),p=n,console.log(p),g>=d.totalPages?b():I(),s.products.length!==0?l(s.products):o.divNotFound.classList.add("not-found--visible")}}let c=null;async function rt(t){const e=t.target.closest("li");if(e){const r=await w(e.dataset.id);X(r),o.modal.classList.add("modal--is-open"),c=e.dataset.id,O(c),W(c)}}function st(){Y()}async function nt(t){t.preventDefault();const e=t.target.searchValue.value.trim();if(e==="")return y.info({title:"Please write your product",position:"topLeft"});B(),q();const r=await J(e);if(A(),r.products.length===0)return o.divNotFound.classList.add("not-found--visible");l(r.products)}async function at(){o.searchForm.reset(),o.productsList.innerHTML="",B();const t=await L();A(),l(t.products)}function k(){let t=i();!t.includes(c)||t.length===0?K(c):D(c),O(c),v()}function lt(){k(),P(),E(),N()}function j(){let t=m();!t.includes(c)||t.length===0?V(c):G(c),W(c),x()}function ut(){j(),P(),Z()}function mt(){if(i().length<=0)return y.info({title:"Select your product to buy"});P(),R(),v(),E(),N(),y.success({title:"Congratulations on your purchase."})}function ct(){return o.body.hasAttribute("data-theme")?($(""),o.body.removeAttribute("data-theme")):($("dark"),o.body.setAttribute("data-theme","dark"))}async function it(){if(g++,g>=d.totalPages&&(y.info({title:"LALA"}),b()),p==="All"||p===""){let t=await L(g);l(t.products)}else{let t=await M(p,g);l(t.products)}}export{H as a,z as b,v as c,x as d,st as e,k as f,ut as g,rt as h,Q as i,ct as j,E as k,N as l,lt as m,j as n,mt as o,o as r,tt as s,Z as w};
//# sourceMappingURL=handlers-CSnyEKok.js.map
