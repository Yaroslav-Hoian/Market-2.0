{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/storage.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getCategoriesList() {\n  try {\n    const data = await axios('https://dummyjson.com/products/category-list');\n    return data.data;\n  } catch (error) {\n    console.log(error.message);\n    throw new Error('Something went wrong!');\n  }\n}\n\nexport async function getProductsList(currentPage = 1) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products?limit=12&skip=${(currentPage - 1) * 12}`\n    );\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n    throw new Error('Something went wrong!');\n  }\n}\n\nexport async function getProductsListByCategory(category, currentPage = 1) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products/category/${category}?limit=12&skip=${\n        (currentPage - 1) * 12\n      }`\n    );\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n    throw new Error('Something went wrong!');\n  }\n}\n\nexport async function getProductsListId(id) {\n  try {\n    const response = await axios.get(`https://dummyjson.com/products/${id}`);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n    throw new Error('Something went wrong!');\n  }\n}\n\nexport async function getProductsBySearch(value, currentPage = 1) {\n  try {\n    const response = await axios.get(\n      `https://dummyjson.com/products/search?q=${value}&limit=12&skip=${\n        (currentPage - 1) * 12\n      }`\n    );\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n    throw new Error('Something went wrong!');\n  }\n}\n","export default {\n  categotiesList: document.querySelector('.categories'),\n  productsList: document.querySelector('.products'),\n  divNotFound: document.querySelector('.not-found'),\n  divModal: document.querySelector('.modal-product'),\n  modal: document.querySelector('.modal'),\n  modalCloseBtn: document.querySelector('.modal__close-btn'),\n  searchForm: document.querySelector('.search-form'),\n  formBtnClear: document.querySelector('.search-form__btn-clear'),\n  addCartBtn: document.querySelector('.modal-product__btn--cart'),\n};\n","import refs from './refs';\n\nexport function renderCategories(data) {\n  const markup = ['All', ...data]\n    .map(item => {\n      return `\n    <li class=\"categories__item\">\n        <button class=\"categories__btn\" type=\"button\">${item}</button>\n    </li>\n `;\n    })\n    .join('');\n\n  refs.categotiesList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function renderProducts(products) {\n  const markup = products\n    .map(({ id, title, thumbnail, brand, category, price }) => {\n      return `\n    <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${brand}</span></p>\n    <p class=\"products__category\">Category:${category}</p>\n    <p class=\"products__price\">Price:${price}$</p>\n </li>\n    `;\n    })\n    .join('');\n\n  refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearList() {\n  refs.divNotFound.classList.remove('not-found--visible');\n  refs.productsList.innerHTML = '';\n}\n\nexport function renderProductsModal({\n  title,\n  thumbnail,\n  shippingInformation,\n  category,\n  price,\n  description,\n  returnPolicy,\n}) {\n  const markup = `\n    <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${category}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price:${price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`;\n  refs.divModal.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearModal() {\n  refs.modal.classList.remove('modal--is-open');\n  refs.divModal.innerHTML = '';\n}\n","const localKey = 'cart';\n\nexport function getCart() {\n  const data = JSON.parse(localStorage.getItem(localKey));\n  return data;\n}\n\nexport function initStorage() {\n  const data = getCart() ?? [];\n  localStorage.setItem(localKey, JSON.stringify(data));\n}\n\nexport function saveCartToStorage(task) {\n  const tasks = getCart();\n  tasks.push(task);\n  localStorage.setItem(localKey, JSON.stringify(tasks));\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  getProductsListByCategory,\n  getProductsList,\n  getProductsListId,\n  getProductsBySearch,\n} from './products-api';\nimport refs from './refs';\nimport {\n  clearList,\n  renderProducts,\n  renderProductsModal,\n  clearModal,\n} from './render-function';\nimport { saveCartToStorage, getCart } from './storage';\n\nexport async function handleClickCategories(event) {\n  if (event.target.classList.contains('categories__btn')) {\n    const currentBtn = event.target;\n    const allBtn = refs.categotiesList.querySelectorAll('.categories__btn');\n    allBtn.forEach(item => {\n      item.classList.remove('categories__btn--active');\n    });\n    currentBtn.classList.add('categories__btn--active');\n    const category = currentBtn.textContent;\n    const products =\n      category === 'All'\n        ? await getProductsList()\n        : await getProductsListByCategory(category);\n    clearList();\n    if (products.products.length !== 0) {\n      renderProducts(products.products);\n    } else {\n      refs.divNotFound.classList.add('not-found--visible');\n    }\n  }\n}\n\nlet id = null;\n\nexport async function handleClickProducts(ev) {\n  const li = ev.target.closest('li');\n  if (li) {\n    const productModal = await getProductsListId(li.dataset.id);\n    renderProductsModal(productModal);\n    refs.modal.classList.add('modal--is-open');\n    id = li.dataset.id;\n    let arr = getCart();\n    if (!arr.includes(id) || arr.length === 0) {\n      ev.target.textContent = 'Remove from cart';\n    }\n  }\n}\n\nexport function handleCloseModal() {\n  clearModal();\n}\n\nexport async function handleSubmit(event) {\n  event.preventDefault();\n\n  const searchProduct = event.target.searchValue.value.trim();\n\n  if (searchProduct === '') {\n    return iziToast.info({\n      title: 'Please write your product',\n      position: 'topLeft',\n    });\n  }\n\n  const searchProductList = await getProductsBySearch(searchProduct);\n  clearList();\n\n  if (searchProductList.products.length === 0) {\n    return refs.divNotFound.classList.add('not-found--visible');\n  } else renderProducts(searchProductList.products);\n}\n\nexport async function formClear() {\n  refs.searchForm.reset();\n  refs.productsList.innerHTML = '';\n\n  const response = await getProductsList();\n  renderProducts(response.products);\n}\n\nexport function hadnleAddCart(ev) {\n  let arr = getCart();\n  if (!arr.includes(id) || arr.length === 0) {\n    saveCartToStorage(id);\n    ev.target.textContent = 'Remove from cart';\n  }\n}\n","//Логіка сторінки Home\nimport {\n  handleClickCategories,\n  handleClickProducts,\n  handleCloseModal,\n  handleSubmit,\n  formClear,\n  hadnleAddCart,\n} from './js/handlers';\nimport { getCategoriesList, getProductsList } from './js/products-api';\nimport refs from './js/refs';\nimport { renderCategories, renderProducts } from './js/render-function';\nimport { initStorage } from './js/storage';\ninitStorage();\nasync function homePage() {\n  renderCategories(await getCategoriesList());\n  const response = await getProductsList();\n  renderProducts(response.products);\n}\nhomePage();\n\nrefs.categotiesList.addEventListener('click', handleClickCategories);\n\nrefs.productsList.addEventListener('click', handleClickProducts);\n\nrefs.modalCloseBtn.addEventListener('click', handleCloseModal);\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\n\nrefs.formBtnClear.addEventListener('click', formClear);\n\nrefs.addCartBtn.addEventListener('click', hadnleAddCart);\n"],"names":["getCategoriesList","axios","error","getProductsList","currentPage","getProductsListByCategory","category","getProductsListId","id","getProductsBySearch","value","refs","renderCategories","data","markup","item","renderProducts","products","title","thumbnail","brand","price","clearList","renderProductsModal","shippingInformation","description","returnPolicy","clearModal","localKey","getCart","initStorage","saveCartToStorage","task","tasks","handleClickCategories","event","currentBtn","handleClickProducts","ev","li","productModal","arr","handleCloseModal","handleSubmit","searchProduct","iziToast","searchProductList","formClear","response","hadnleAddCart","homePage"],"mappings":"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"}